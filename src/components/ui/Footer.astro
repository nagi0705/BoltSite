---
import type { FooterLink, SocialLink } from '../../types';
import { getLocaleFromPathname, getPathPrefix, loadTranslation } from '../../utils/i18n';

const { currentPath } = Astro.props;
const locale = getLocaleFromPathname(currentPath || Astro.url.pathname);
const t = await loadTranslation(locale);
const pathPrefix = getPathPrefix(locale);

const socialLinks: SocialLink[] = [
  { name: "Twitter", src: "/src/assets/twitter.svg", link: "https://twitter.com/boltsite" },
  { name: "Twitter(日本語)", src: "/src/assets/twitter.svg", link: "https://twitter.com/boltsite_jp" },
  { name: "LinkedIn", src: "/src/assets/linkedin.svg", link: "https://linkedin.com/company/boltsite" },
];

const servicesLinks: FooterLink[] = [
  { name: t.services.overview, href: `${pathPrefix}/services` },
  { name: t.nav.pricing, href: `${pathPrefix}/pricing` },
  { name: t.nav.features, href: `${pathPrefix}/services#features` },
  { name: t.nav.performance, href: `${pathPrefix}/#performance` },
  { name: t.services.dx_package, href: `${pathPrefix}/#dx-package` },
];

const supportLinks: FooterLink[] = [
  { name: t.footer.faq, href: `${pathPrefix}/#faq` },
  { name: t.footer.flow, href: `${pathPrefix}/#introduction-flow` },
  { name: t.footer.company, href: "https://cor-jp.com" },
];
---

<footer class="bg-gray-900 text-white">
  <div class="section-container">
    <div class="section-content">
      
      <!-- メインコンテンツ -->
      <div class="py-16">
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
          
          <!-- ロゴと説明 -->
          <div>
            <h2 class="text-xl font-bold text-white mb-4">BoltSite</h2>
            <p class="text-gray-300 mb-4 text-sm leading-relaxed" set:html={t.footer.description}></p>
            <div class="flex gap-3">
              {socialLinks.map((social) => (
                <a
                  href={social.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-gray-400 hover:text-white transition-colors duration-300"
                  aria-label={social.name}
                >
                  <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    {social.name.includes("Twitter") && (
                      <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z" />
                    )}
                    {social.name === "LinkedIn" && (
                      <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z" />
                    )}
                  </svg>
                </a>
              ))}
            </div>
          </div>
          
          <!-- サービス -->
          <div>
            <h3 class="text-base font-semibold mb-4">{t.footer.services}</h3>
            <ul class="space-y-2">
              {servicesLinks.map((link) => (
                <li>
                  <a
                    href={link.href}
                    class="text-gray-400 hover:text-white transition-colors duration-300 text-sm"
                  >
                    {link.name}
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <!-- サポート -->
          <div>
            <h3 class="text-base font-semibold mb-4">{t.footer.support}</h3>
            <ul class="space-y-2">
              {supportLinks.map((link) => (
                <li>
                  <a
                    href={link.href}
                    target={link.href.startsWith('http') ? '_blank' : '_self'}
                    rel={link.href.startsWith('http') ? 'noopener noreferrer' : undefined}
                    class="text-gray-400 hover:text-white transition-colors duration-300 text-sm"
                  >
                    {link.name}
                  </a>
                </li>
              ))}
            </ul>
          </div>
          
          <!-- お問い合わせ -->
          <div>
            <h3 class="text-base font-semibold mb-4">{t.footer.contact}</h3>
            <div class="space-y-3 text-sm">
              <div class="flex items-start gap-2">
                <span class="text-gray-400">✉</span>
                <a href="https://cor-jp.com/contact" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors duration-300">
                  {t.common.email}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 分割線 -->
      <div class="border-t border-gray-800"></div>

      <!-- コピーライト -->
      <div class="py-6 text-center">
        <div class="text-gray-400 text-sm mb-3">
          {t.footer.copyright}
        </div>
        <div class="flex justify-center gap-6 text-sm">
          <a href={`${pathPrefix}/privacy`} class="text-gray-400 hover:text-white transition-colors duration-300">
            {t.footer.privacy}
          </a>
          <span class="text-gray-600">|</span>
          <a href={`${pathPrefix}/terms`} class="text-gray-400 hover:text-white transition-colors duration-300">
            {t.footer.terms}
          </a>
        </div>
      </div>
      
    </div>
  </div>
</footer>
